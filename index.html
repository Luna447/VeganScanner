<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VeganScanner</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f766e">
  <link rel="icon" href="icons/icon-192.png" type="image/png">

  <style>
    :root { color-scheme: dark; }
    html,body { margin:0; background:#0b1212; color:#e6f2ef; font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial; }
    header { padding:16px; background:#0f766e; color:#fff; font-weight:700; }
    main { padding:16px; display:grid; gap:14px; max-width:920px; margin:0 auto; }
    .card { background:#0f1414; border:1px solid #0f2a28; border-radius:14px; padding:14px; }
    .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    input[type=file] { accent-color:#0f766e; }
    button { background:#16a394; border:0; color:#071010; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer; }
    button[disabled]{ opacity:.5; cursor:not-allowed; }
    progress { width:220px; height:10px; }
    .thumbs { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:8px; }
    .thumbs img{ width:100%; height:100px; object-fit:cover; border-radius:8px; border:1px solid #113; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:13px; white-space:pre-wrap; word-break:break-word; }
    .muted { opacity:.75 }
    .ok { color:#9ff2d5 }
    .err { color:#ff9ea8 }
  </style>

  <!-- Tesseract lokal laden. Fallback auf dieselbe Hauptversion (v5), kein Versionsmix. -->
	<script src="vendor/tesseract/tesseract.min.js" defer></script>
	<script src="app.js" type="module" defer></script>

</head>
<body>
  <header>VeganScanner Â· OCR</header>
  <main>
    <section class="card">
      <div class="row">
        <input id="file" type="file" accept="image/*" multiple>
        <button id="scan" disabled>Scannen</button>
        <progress id="prog" value="0" max="1" hidden></progress>
        <span id="status" class="muted mono"></span>
      </div>
      <div id="thumbs" class="thumbs"></div>
    </section>

    <section class="card">
      <h3>Ergebnis</h3>
      <pre id="out" class="mono"></pre>
    </section>

    <section class="card">
      <h3>Diagnose</h3>
      <pre id="log" class="mono"></pre>
    </section>
  </main>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(e => console.warn('SW fail', e));
    }
  </script>
</body>
</html>
